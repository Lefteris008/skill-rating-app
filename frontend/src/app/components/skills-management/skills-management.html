<div class="skills-management-container">
    <header>
        <h2>Manage Skills</h2>
        <div class="header-actions">
            <button routerLink="/dashboard" class="back-btn">← Dashboard</button>
            <button (click)="logout()" class="logout-btn">Logout</button>
        </div>
    </header>

    <div class="section">
        <div class="role-selector">
            <label>Select Job Role to Manage Skills:</label>
            <select [(ngModel)]="selectedRoleId" (change)="onRoleChange()">
                <option [ngValue]="null">General Skills (All Roles)</option>
                <option *ngFor="let role of roles" [value]="role.id">{{ role.name }}</option>
            </select>
        </div>

        <h3>Skills for {{ selectedRoleId ? roles[selectedRoleId-1].name : 'All Roles' }}</h3>

        <div class="add-form">
            <div class="skill-input-group">
                <input [(ngModel)]="newSkillName" placeholder="New Skill Name" (keydown.enter)="addSkill()" />
                <div class="slider-container">
                    <label>Target Level: {{ newSkillTarget }}</label>
                    <input type="range" min="0" max="100" [(ngModel)]="newSkillTarget" class="slider" />
                </div>
            </div>
            <button (click)="addSkill()">Add Skill</button>
        </div>

        <ul>
            <li *ngFor="let skill of skills">
                <div class="skill-info">
                    <span class="skill-name">{{ skill.name }}</span>
                    <span class="skill-target">Target: {{ skill.targetLevel || 0 }}</span>
                </div>
                <div class="actions">
                    <button class="edit-btn" (click)="startEdit(skill)">✎</button>
                    <button class="delete-btn" (click)="deleteSkill(skill.id)">×</button>
                </div>
            </li>
        </ul>
    </div>

    <!-- Edit Modal -->
    <div class="modal-overlay" *ngIf="editingSkill" (click)="cancelEdit()">
        <div class="modal" (click)="$event.stopPropagation()">
            <h3>Edit Skill</h3>
            <input [(ngModel)]="editSkillName" (keydown.enter)="saveEdit()" autofocus placeholder="Skill Name" />
            <div class="slider-container">
                <label>Target Level: {{ editSkillTarget }}</label>
                <input type="range" min="0" max="100" [(ngModel)]="editSkillTarget" class="slider" />
            </div>
            <div class="modal-actions">
                <button (click)="saveEdit()">Save</button>
                <button (click)="cancelEdit()">Cancel</button>
            </div>
        </div>
    </div>
</div>